"use strict";!function(t,e,n){function r(){var t=e.querySelector(".app-page.app-active");if(null!==t.querySelector("div.backdrop-panel")){var n=d[d.length-1].backdrop;n.classList.remove("fadeout"),t.removeChild(n);var i=d[d.length-1].panel;i.style.visibility="hidden",d.pop(),f=!1,this.removeEventListener(s,r,!1)}}function i(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!f&&(n.style.visibility="visible",!n.classList.contains("active"))){n.classList.add("active");var r=p();d.push({panel:n,backdrop:r}),e.querySelector(".app-page.app-active").appendChild(r)}}function a(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!f&&n.classList.contains("active")&&!f){f=!0,n.classList.remove("active");var i=d[d.length-1].backdrop;i.classList.add("fadeout"),i.addEventListener(s,r,!1)}}function o(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");n.classList.contains("active")?a(n):i(n)}function l(){var t=d.length;return t>0?(a(d[t-1].panel),!0):!1}var s="webkitTransitionEnd";n.animationEnd&&(s=""===n.animationPrefix?"transitionend":"webkitTransitionEnd");var u=!1,c=!1,d=[],f=!1,p=function(){var t=e.createElement("div");return t.classList.add("backdrop-panel"),t},v=function(t){for(var n,r=e.querySelectorAll("[data-panel-id], [data-panel-close]");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t)return t},g=function(t){var n=v(t.target);if(n){var r=n.getAttribute("data-panel-id");return r?e.querySelector("#"+r):h(t.target)}},h=function(t){for(var n,r=e.querySelectorAll(".panel, .panel-expanded");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t&&t.classList.contains("active"))return t},y=function(t){for(;t&&t!==e;t=t.parentNode)if("true"===t.getAttribute("selectable"))return t};t.addEventListener("touchstart",function(t){if(t=t.originalEvent||t,d.length>0){var e=d[d.length-1].panel,n=h(t.target);n||a(e),n&&n!==e&&n.id!==e.id&&a(e)}}),t.addEventListener("touchmove",function(t){t=t.originalEvent||t,c=!0}),t.addEventListener("touchend",function(t){var e=v(t.target),n=null;e&&(n=g(t),u=e,n&&(n.classList.contains("active")?a(n):i(n))),n=h(t.target);var r=y(t.target);n&&r&&!c&&(a(n),t=new CustomEvent("select",{detail:{item:r.textContent,target:t.target},bubbles:!0,cancelable:!0}),u.textContent=r.textContent,n.dispatchEvent(t)),c=!1}),n.Panel=function(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");return{open:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return i(n),this}),close:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return a(n),this}),toggle:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return o(n),this}),closeLastPanel:l}},t.Phonon=n,"function"==typeof define&&define.amd?define(function(){return n.returnGlobalNamespace===!0?n:n.Panel}):"object"==typeof module&&module.exports&&(module.exports=n.returnGlobalNamespace===!0?n:n.Panel)}(window,document,window.Phonon||{});