"use strict";!function(t,e,n,r){function i(){var t=e.querySelector(".app-page.app-active");if(null!==t.querySelector("div.backdrop-panel")){var n=f[f.length-1].backdrop;n.classList.remove("fadeout"),t.removeChild(n);var r=f[f.length-1].panel;r.style.visibility="hidden",f.pop(),p=!1,this.removeEventListener(u,i,!1)}}function a(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!p&&(n.style.visibility="visible",!n.classList.contains("active"))){n.classList.add("active");var r=v();f.push({panel:n,backdrop:r}),e.querySelector(".app-page.app-active").appendChild(r)}}function o(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!p&&n.classList.contains("active")&&!p){p=!0,n.classList.remove("active");var r=f[f.length-1].backdrop;r.classList.add("fadeout"),r.addEventListener(u,i,!1)}}function l(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");n.classList.contains("active")?o(n):a(n)}function s(){var t=f.length;return t>0?(o(f[t-1].panel),!0):!1}var u="webkitTransitionEnd";n.animationEnd&&(u=""===n.animationPrefix?"transitionend":"webkitTransitionEnd");var c=!1,d=!1,f=[],p=!1,v=function(){var t=e.createElement("div");return t.classList.add("backdrop-panel"),t},g=function(t){for(var n,r=e.querySelectorAll("[data-panel-id], [data-panel-close]");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t)return t},h=function(t){var n=g(t.target);if(n){var r=n.getAttribute("data-panel-id");return r?e.querySelector("#"+r):y(t.target)}},y=function(t){for(var n,r=e.querySelectorAll(".panel, .panel-expanded");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t&&t.classList.contains("active"))return t},b=function(t){for(;t&&t!==e;t=t.parentNode)if("true"===t.getAttribute("selectable"))return t};t.addEventListener("touchstart",function(t){if(t=t.originalEvent||t,f.length>0){var e=f[f.length-1].panel,n=y(t.target);n||o(e),n&&n!==e&&n.id!==e.id&&o(e)}}),t.addEventListener("touchmove",function(t){t=t.originalEvent||t,d=!0}),t.addEventListener("touchend",function(t){var e=g(t.target),n=null;e&&(n=h(t),c=e,n&&(n.classList.contains("active")?o(n):a(n))),n=y(t.target);var r=b(t.target);n&&r&&!d&&(o(n),t=new CustomEvent("select",{detail:{item:r.textContent,target:t.target},bubbles:!0,cancelable:!0}),c.textContent=r.textContent,n.dispatchEvent(t)),d=!1}),n.Panel=function(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");return{open:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return a(n),this}),close:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return o(n),this}),toggle:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return l(n),this}),closeLastPanel:s}},t.Phonon=n,"function"==typeof define&&define.amd?define(function(){return n.returnGlobalNamespace===!0?n:n.Panel}):"object"==typeof module&&module.exports&&(module.exports=n.returnGlobalNamespace===!0?n:n.Panel)}(window,document,window.Phonon||{});