"use strict";!function(t,e,r){function n(t){if("string"!=typeof t.baseUrl)throw new Error("baseUrl must be a string");if("undefined"!=typeof t.timeout&&"number"!=typeof t.timeout)throw new Error("timeout must be a number (duration)");if("string"!=typeof t.dataType)throw new Error("dataType must be a string");if("undefined"!=typeof t.crossDomain&&"boolean"!=typeof t.crossDomain)throw new Error("crossDomain must be a boolean or undefined");this.baseUrl=t.baseUrl,this.timeout=t.timeout?t.timeout:null,this.dataType=t.dataType.toLowerCase(),this.crossDomain=t.crossDomain?!0:!1,this.currentXhr=null}n.prototype.createXhr=function(){var t=null;try{t=new XMLHttpRequest,"withCredentials"in t&&this.crossDomain&&(t.withCredentials=!0)}catch(e){console.error(e)}return t},n.prototype.getXhr=function(){return this.currentXhr},n.prototype.send=function(t,e,r,n,o){if("string"!=typeof t)throw new Error("method must be a string");if("string"!=typeof e)throw new Error("url must be a string");if("string"!=typeof r&&"object"!=typeof r)throw new Error("data must be a string or null");if("function"!=typeof n)throw new Error("successCallback must be a function");this.currentXhr=this.createXhr();var i=this;this.currentXhr?(i.currentXhr.open(t,this.baseUrl+e,!0),"xml"===i.dataType&&i.currentXhr.overrideMimeType("application/xml"),i.currentXhr.onreadystatechange=function(t){if(4===i.currentXhr.readyState){if(200===i.currentXhr.status)if("json"===i.dataType){var e=i.toJSON(i.currentXhr.responseText);"JSON_MALFORMED"!==e?n(e):"function"==typeof o&&o(e,t)}else n("xml"===i.dataType?i.currentXhr.responseXML:i.currentXhr.responseText);else"function"==typeof o&&o("NO_INTERNET_ACCESS",t);i.currentXhr=null}},i.timeout&&(i.currentXhr.timeout=i.timeout,i.currentXhr.ontimeout=function(){"function"==typeof o&&o("TIMEOUT_EXCEEDED")}),i.currentXhr.send(r)):"function"==typeof o&&o("XMLHTTPREQUEST_UNAVAILABLE")},n.prototype.toJSON=function(t){var e;try{e=JSON.parse(t)}catch(r){e="JSON_MALFORMED"}return e},n.prototype.get=function(t,e,r,n){this.send("get",t,e,r,n)},n.prototype.post=function(t,e,r,n){this.send("post",t,e,r,n)},n.prototype.put=function(t,e,r,n){this.send("put",t,e,r,n)},n.prototype.del=function(t,e,r,n){this.send("delete",t,e,r,n)},n.prototype.cancel=function(){this.currentXhr&&this.currentXhr.abort()},r.Ajax=n,t.Phonon=r,"function"==typeof define&&define.amd?define(function(){return r.returnGlobalNamespace===!0?r:r.Ajax}):"object"==typeof module&&module.exports&&(module.exports=r.returnGlobalNamespace===!0?r:r.Ajax)}(window,document,window.Phonon||{});