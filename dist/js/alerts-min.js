"use strict";!function(t,e,n,r){function i(){var t=e.querySelector(".app-page.app-active");if(null!==t.querySelector("div.backdrop-alert")){var n=f[f.length-1].backdrop;n.classList.remove("fadeout"),t.removeChild(n);var r=f[f.length-1].alert;r.style.visibility="hidden",r.classList.remove("close"),f.pop(),v=!1,this.removeEventListener(c,i,!1)}}function a(e){var n=getComputedStyle(e),r=n.width,i=n.height;r=r.slice(0,r.length-2),i=i.slice(0,i.length-2);var a=t.innerWidth/2-r/2,o=t.innerHeight/2-i/2;e.style.marginLeft=a+"px",e.style.marginTop=o+"px"}function o(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The alert with ID "+t+" does not exist");if(!v&&(n.style.visibility="visible",!n.classList.contains("active"))){a(n),n.classList.add("active");var r=p();f.push({alert:n,backdrop:r}),e.querySelector(".app-page.app-active").appendChild(r)}}function l(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The alert with ID "+t+" does not exist");if(!v&&n.classList.contains("active")&&!v){v=!0,n.classList.remove("active"),n.classList.add("close");var r=f[f.length-1].backdrop;r.classList.add("fadeout"),r.addEventListener(c,i,!1)}}function s(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The alert with ID "+t+" does not exist");n.classList.contains("active")?l(n):o(n)}var c="webkitTransitionEnd";n.animationEnd&&(c=""===n.animationPrefix?"transitionend":"webkitTransitionEnd");var u=!1,d=!1,f=[],v=!1,p=function(){var t=e.createElement("div");return t.classList.add("backdrop-alert"),t},g=function(t){for(var n,r=e.querySelectorAll("[data-alert-id], [data-alert-close]");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t)return t},h=function(t){var n=g(t.target);if(n){var r=n.getAttribute("data-alert-id");return r?e.querySelector("#"+r):y(t.target)}},y=function(t){for(var n,r=e.querySelectorAll(".alert");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t&&t.classList.contains("active"))return t},m=function(t){for(;t&&t!==e;t=t.parentNode)if("true"===t.getAttribute("selectable"))return t};t.addEventListener("touchstart",function(t){if(t=t.originalEvent||t,f.length>0){var e=f[f.length-1].alert,n=y(t.target);n||"false"!==e.getAttribute("data-cancelable")&&l(e),n&&n!==e&&n.id!==e.id&&l(e)}}),t.addEventListener("touchmove",function(t){t=t.originalEvent||t,d=!0}),t.addEventListener("touchend",function(t){var e=g(t.target),n=null;e&&(n=h(t),u=e,n&&(n.classList.contains("active")?l(n):o(n))),n=y(t.target);var r=m(t.target);n&&r&&!d&&(l(n),t=new CustomEvent("select",{detail:{item:r.textContent,target:t.target},bubbles:!0,cancelable:!0}),u.textContent=r.textContent,n.dispatchEvent(t)),d=!1}),n.Alert=function(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The alert with ID "+t+" does not exist");return{open:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return o(n),this}),close:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return l(n),this}),toggle:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return s(n),this})}},t.Phonon=n,"function"==typeof define&&define.amd?define(function(){return n.returnGlobalNamespace===!0?n:n.Alert}):"object"==typeof module&&module.exports&&(module.exports=n.returnGlobalNamespace===!0?n:n.Alert)}(window,document,window.Phonon||{});