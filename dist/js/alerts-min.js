"use strict";!function(t,e,n){function r(){var t=e.querySelector(".app-page.app-active");if(null!==t.querySelector("div.backdrop-alert")){var n=d[d.length-1].backdrop;n.classList.remove("fadeout"),t.removeChild(n);var i=d[d.length-1].panel;i.style.visibility="hidden",i.classList.remove("close"),d.pop(),f=!1,this.removeEventListener(s,r,!1)}}function i(e){var n=getComputedStyle(e),r=n.width,i=n.height;r=r.slice(0,r.length-2),i=i.slice(0,i.length-2);var a=t.innerWidth/2-r/2,o=t.innerHeight/2-i/2;e.style.marginLeft=a+"px",e.style.marginTop=o+"px"}function a(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!f&&(n.style.visibility="visible",!n.classList.contains("active"))){i(n),n.classList.add("active");var r=v();d.push({panel:n,backdrop:r}),e.querySelector(".app-page.app-active").appendChild(r)}}function o(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");if(!f&&n.classList.contains("active")&&!f){f=!0,n.classList.remove("active"),n.classList.add("close");var i=d[d.length-1].backdrop;i.classList.add("fadeout"),i.addEventListener(s,r,!1)}}function l(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");n.classList.contains("active")?o(n):a(n)}var s="webkitTransitionEnd";n.animationEnd&&(s=""===n.animationPrefix?"transitionend":"webkitTransitionEnd");var c=!1,u=!1,d=[],f=!1,v=function(){var t=e.createElement("div");return t.classList.add("backdrop-alert"),t},p=function(t){for(var n,r=e.querySelectorAll("[data-alert-id], [data-alert-close]");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t)return t},g=function(t){var n=p(t.target);if(n){var r=n.getAttribute("data-alert-id");return r?e.querySelector("#"+r):h(t.target)}},h=function(t){for(var n,r=e.querySelectorAll(".alert");t&&t!==e;t=t.parentNode)for(n=r.length;n--;)if(r[n]===t&&t.classList.contains("active"))return t},y=function(t){for(;t&&t!==e;t=t.parentNode)if("true"===t.getAttribute("selectable"))return t};t.addEventListener("touchstart",function(t){if(t=t.originalEvent||t,d.length>0){var e=d[d.length-1].panel,n=h(t.target);n||o(e),n&&n!==e&&n.id!==e.id&&o(e)}}),t.addEventListener("touchmove",function(t){t=t.originalEvent||t,u=!0}),t.addEventListener("touchend",function(t){var e=p(t.target),n=null;e&&(n=g(t),c=e,n&&(n.classList.contains("active")?o(n):a(n))),n=h(t.target);var r=y(t.target);n&&r&&!u&&(o(n),t=new CustomEvent("select",{detail:{item:r.textContent,target:t.target},bubbles:!0,cancelable:!0}),c.textContent=r.textContent,n.dispatchEvent(t)),u=!1}),n.Alert=function(t){var n="string"==typeof t?e.querySelector(t):t;if(null===n)throw new Error("The panel with ID "+t+" does not exist");return{open:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return a(n),this}),close:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return o(n),this}),toggle:function(t){var e=function(){return t.apply(this,arguments)};return e.toString=function(){return t.toString()},e}(function(){return l(n),this})}},t.Phonon=n,"function"==typeof define&&define.amd?define(function(){return n.returnGlobalNamespace===!0?n:n.Alert}):"object"==typeof module&&module.exports&&(module.exports=n.returnGlobalNamespace===!0?n:n.Alert)}(window,document,window.Phonon||{});